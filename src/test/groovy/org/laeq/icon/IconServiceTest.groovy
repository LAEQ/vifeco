package org.laeq.icon

import org.laeq.model.Category
import org.laeq.settings.Settings
import spock.lang.Specification

class IconServiceTest extends Specification {
    IconService service = new IconService();

    def "GetImagePath"() {
        given:
        Category category = new Category(1, "test category MockName", "mock icon", "#FFEEFF", "mock shortcut")

        when:
        def result = service.getImagePath(category, "_off")
        def expected = Settings.svgPath + File.separator + "test_category_mockname_off.png"

        then:
        result == expected
    }


    def "create PNG"() {
        given:
        Category category = new Category(1, "create icon",
                "M16.916 11.532l-1.131-4.144 1.294-3.21 3.603 1.159-.194 2.438-3.572 3.757zm5.929-1.734c.707 2.066-1.26 2.442-1.852 2.312-.866-.197-1.911-.464-2.618-.65l3.081-3.254.286-" +
                        "3.579-5.243-1.685-1.766 4.383 2.202 8.076c.082.299-.151.579-.442.579h-15.035c-.312 0-.458-.274-.458-.458v-4.065c0-.311.273-.458.458-.458h6.542v-" +
                        "3.561c0-.252.206-.458.459-.458h3.141s3.552-4.795 4.257-5.817c.13-.189.388-.206.59-.118 1.558.682 5.031 2.246 6.406 2.932.091.045.146.135.148.237-.031.23" +
                        "-.78 2.929-.922 3.45.111.3.437 1.181.766 2.134zm1.154-5.584c0-.483-.268-.917-.699-1.132-1.389-.694-4.886-2.267-6.453-2.953-.198-.087-.41-.129-.618-.129-.44" +
                        "9 0-.89.192-1.161.548-.547.719-3.389 4.641-3.961 5.432h-2.648c-.805 0-1.459.654-1.459 1.458v2.561h-5.542c-.701 0-1.458.559-1.458 1.458v4.065c0 .701.558 1.45" +
                        "8 1.458 1.458h15.035c.978 0 1.654-.93 1.407-1.842l-.814-2.983c.417.112 2.376.633 3.687.931 1.215.278 2.163-.438 2.354-.6.56-.475.869-1.139.869-1.869 0-.637-" +
                        ".146-1.038-.868-2.998.877-3.187.876-3.236.871-3.405zm-6.999 18.766h-14c-1.103 0-2-.897-2-2 0-1.095.892-1.993 2-2h14c1.103 0 2 .898 2 2 0 1." +
                        "-.897 2-2 2zm0-5h-14.02c-1.646.011-2.98 1.351-2.98 3 0 1.656 1.344 3 3 3h14c1.655 0 3-1.344 3-3 0-1.655-1.345-3-3-3zm-.09 3.487c-.274 0-.5-.224-.5" +
                        "-.5 0-.277.226-.5.5-.5.276 0 .5.223.5.5 0 .276-.224.5-.5.5zm0-2c-.827 0-1.5.672-1.5 1.5 0 .827.673 1.5 1.5 1.5s1.5-.673 1.5-1.5c0-.828-.673-1.5-1.5-1" +
                        ".5zm-4.536 2c-.275 0-.501-.224-.501-.5 0-.277.226-.5.501-.5.274 0 .5.223.5.5 0 .276-.226.5-.5.5zm0-2c-.827 0-1.501.672-1.501 1.5 0 .827.674 1.5 1.501 " +
                        ".5.827 0 1.5-.673 1.5-1.5 0-.828-.673-1.5-1.5-1.5zm-4.801 2c-.275 0-.5-.224-.5-.5 0-.277.225-.5.5-.5s.5.223.5.5c0 .276-.225.5-.5.5zm0-2c-.827 0-1.5.672-" +
                        "1.5 1.5 0 .827.673 1.5 1.5 1.5s1.5-.673 1.5-1.5c0-.828-.673-1.5-1.5-1.5zm-4.47 2c-.274 0-.5-.224-.5-.5 0-.277.226-.5.5-.5.275 0 .5.223.5.5 0 .276-.225.5-.5.5zm0-2c-.827 0-1.5.672-1.5 1.5 0 .827.673 1.5 1.5 1.5.828 0 1.5-.673 1.5-1.5 0-.828-.672-1.5-1.5-1.5zm-1.107-7.5h4v1h-4v-1zm0 2h4v1h-4v-1zm8-3v-2h3.095l.522 2h-3.617zm-1-3v4h5.912c-.34" +
                        "7-1.334-.696-2.667-1.045-4h-4.867z", "#FF0000", "mock shortcut")

        when:
        def result = service.createPNG(category)
        File file = new File(service.getImagePath(category, "_off"))

        then:
        file.exists() == true
    }
}
